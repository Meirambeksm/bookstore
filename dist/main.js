/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";var __webpack_modules__={"./src/sass/styles.scss":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval("__webpack_require__.r(__webpack_exports__);\n// extracted by mini-css-extract-plugin\n\n\n//# sourceURL=webpack://bookstore/./src/sass/styles.scss?")},"./src/script/card.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _cart__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./cart */ "./src/script/cart.js");\n\r\n\r\nclass Card {\r\n  constructor() {\r\n    this.cards = document.querySelector(".cards");\r\n    this.key = "AIzaSyCXUDV1ibZFH-hMDIJj96IArJdfOmcfqx8";\r\n    this.genre = "Architecture";\r\n    this.startIndex = 0;\r\n    this.loadBtn = document.querySelector(".load-btn");\r\n    this.sidebarButtons = document.querySelectorAll(".sidebar-item");\r\n  }\r\n\r\n  cardEventListeners() {\r\n    this.loadBtn.addEventListener("click", () => this.addCard());\r\n    this.sidebarButtons.forEach((button) => {\r\n      button.addEventListener("click", async () => {\r\n        this.sidebarButtons.forEach((button) =>\r\n          button.classList.remove("active")\r\n        );\r\n        button.classList.add("active");\r\n\r\n        this.genre = button.textContent;\r\n        this.startIndex = 0;\r\n        this.cards.innerHTML = "";\r\n\r\n        const data = await this.fetchBooks();\r\n        data.forEach((book) => this.createCard(book));\r\n      });\r\n    });\r\n  }\r\n\r\n  async renderPage() {\r\n    const data = await this.fetchBooks();\r\n    data.forEach((book) => {\r\n      this.createCard(book);\r\n      _cart__WEBPACK_IMPORTED_MODULE_0__["default"].shoppingLabel.textContent = _cart__WEBPACK_IMPORTED_MODULE_0__["default"].purchasedBooks.length;\r\n      _cart__WEBPACK_IMPORTED_MODULE_0__["default"].updateCart(_cart__WEBPACK_IMPORTED_MODULE_0__["default"].shoppingLabel.textContent);\r\n    });\r\n  }\r\n\r\n  async addCard() {\r\n    this.startIndex += 6;\r\n    const data = await this.fetchBooks();\r\n    data.forEach((book) => this.createCard(book));\r\n  }\r\n\r\n  async fetchBooks() {\r\n    const url = `https://www.googleapis.com/books/v1/volumes?q="subject:${this.genre}"&key=${this.key}&printType=books&startIndex=${this.startIndex}&maxResults=6&langRestrict=en`;\r\n    try {\r\n      const res = await fetch(url);\r\n      const data = await res.json();\r\n      return await data.items;\r\n    } catch {\r\n      console.log("There was an error loading data...");\r\n    }\r\n  }\r\n\r\n  createCard(item) {\r\n    const card = document.createElement("div");\r\n    card.setAttribute("class", "card");\r\n    const poster = document.createElement("div");\r\n    poster.setAttribute("class", "card-poster");\r\n    const image = document.createElement("img");\r\n    image.setAttribute("class", "card-poster-img");\r\n    image.setAttribute("src", `${item?.volumeInfo?.imageLinks?.thumbnail}`);\r\n    image.setAttribute("alt", "poster");\r\n    const cardInfo = document.createElement("div");\r\n    cardInfo.setAttribute("class", "card-info");\r\n    const author = document.createElement("span");\r\n    author.setAttribute("class", "card-author");\r\n    author.textContent =\r\n      item?.volumeInfo?.authors?.length === 1\r\n        ? item?.volumeInfo?.authors[0]\r\n        : item?.volumeInfo?.authors?.join(", ");\r\n    const name = document.createElement("span");\r\n    name.setAttribute("class", "card-name");\r\n    name.textContent = item.volumeInfo.title;\r\n    const rating = document.createElement("div");\r\n    rating.innerHTML = `${\r\n      item?.volumeInfo?.averageRating\r\n        ? this.handleRating(item?.volumeInfo?.averageRating)\r\n        : ""\r\n    }`;\r\n    const review = document.createElement("span");\r\n    review.setAttribute("class", "card-review");\r\n    review.textContent = item?.volumeInfo?.ratingCount\r\n      ? item?.volumeInfo?.ratingCount\r\n      : "";\r\n    const description = document.createElement("p");\r\n    description.setAttribute("class", "card-description");\r\n    description.textContent = item.volumeInfo.description;\r\n    const price = document.createElement("span");\r\n    price.setAttribute("class", "card-price");\r\n    price.textContent = item.saleInfo.retailPrice\r\n      ? `${item.saleInfo?.retailPrice?.amount} ${item.saleInfo?.retailPrice?.currencyCode}`\r\n      : "";\r\n    const button = document.createElement("button");\r\n    button.setAttribute("class", "card-btn");\r\n    button.textContent = "buy now";\r\n    button.addEventListener("click", () => _cart__WEBPACK_IMPORTED_MODULE_0__["default"].addPurchasedBooks(button));\r\n\r\n    poster.appendChild(image);\r\n    cardInfo.appendChild(author);\r\n    cardInfo.appendChild(name);\r\n    cardInfo.appendChild(rating);\r\n    cardInfo.appendChild(description);\r\n    cardInfo.appendChild(price);\r\n    cardInfo.appendChild(button);\r\n    card.appendChild(poster);\r\n    card.appendChild(cardInfo);\r\n    this.cards.appendChild(card);\r\n  }\r\n\r\n  handleRating(rating) {\r\n    let stars = "";\r\n    const starFull = \'<img src="./assets/star-full.svg" alt="star">\';\r\n    const starEmpty = \'<img src="./assets/star-empty.svg" alt="star">\';\r\n\r\n    for (let i = 0; i < 5; i++) {\r\n      if (i < rating) {\r\n        stars += starFull;\r\n      } else {\r\n        stars += starEmpty;\r\n      }\r\n    }\r\n    return stars;\r\n  }\r\n}\r\n\r\nconst card = new Card();\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (card);\r\n\n\n//# sourceURL=webpack://bookstore/./src/script/card.js?')},"./src/script/carousel.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\nclass Carousel {\r\n  constructor() {\r\n    this.buttons = document.querySelectorAll(".carousel-btn");\r\n    this.image = document.querySelector(".carousel-banner");\r\n    this.index = 1;\r\n  }\r\n\r\n  carouselEventListeners() {\r\n    this.buttons.forEach((button, i) =>\r\n      button.addEventListener("click", () => {\r\n        this.image.src = `./assets/banner${i + 1}.png`;\r\n        this.updateButtonColor(i);\r\n        this.index = i + 1;\r\n      })\r\n    );\r\n  }\r\n\r\n  changeBanner() {\r\n    setInterval(() => {\r\n      this.image.src = `./assets/banner${this.index}.png`;\r\n      this.updateButtonColor(this.index - 1);\r\n      this.index++;\r\n      if (this.index > 3) this.index = 1;\r\n    }, 5000);\r\n  }\r\n\r\n  updateButtonColor(activeIndex) {\r\n    this.buttons.forEach((button, i) => {\r\n      button.style.backgroundColor = i === activeIndex ? "#4c3db2" : "#eeedf5";\r\n    });\r\n  }\r\n}\r\n\r\nconst carousel = new Carousel();\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (carousel);\r\n\n\n//# sourceURL=webpack://bookstore/./src/script/carousel.js?')},"./src/script/cart.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var _card__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./card */ "./src/script/card.js");\n\r\n\r\nclass Cart {\r\n  constructor() {\r\n    this.shoppingLabel = document.querySelector(".label");\r\n    this.cart = document.querySelector(".cart");\r\n    this.purchasedBooks =\r\n      JSON.parse(localStorage.getItem("purchasedBooks")) || [];\r\n  }\r\n\r\n  cartEventListeners() {\r\n    this.cart.addEventListener("click", () => this.reset());\r\n  }\r\n\r\n  addPurchasedBooks(button) {\r\n    const element = button.parentNode;\r\n    const purchasedBook = {\r\n      author: element.querySelector(".card-author").textContent,\r\n      title: element.querySelector(".card-name").textContent,\r\n      rating: element.querySelector(".card-review")?.textContent,\r\n      description: element.querySelector(".card-description").textContent,\r\n      price: element.querySelector(".card-price").textContent,\r\n    };\r\n\r\n    if (button.textContent === "in the cart") {\r\n      button.textContent = "buy now";\r\n      button.classList.remove("card-btn-purchased");\r\n      button.classList.add("card-btn");\r\n      this.purchasedBooks.pop();\r\n    } else {\r\n      button.textContent = "in the cart";\r\n      button.classList.remove("card-btn");\r\n      button.classList.add("card-btn-purchased");\r\n      this.purchasedBooks.push(purchasedBook);\r\n    }\r\n\r\n    localStorage.setItem("purchasedBooks", JSON.stringify(this.purchasedBooks));\r\n    this.shoppingLabel.textContent = this.purchasedBooks.length;\r\n    this.updateCart(this.shoppingLabel.textContent);\r\n    console.log(this.purchasedBooks);\r\n  }\r\n\r\n  updateCart(books) {\r\n    if (books > 0) {\r\n      this.shoppingLabel.style.display = "flex";\r\n    } else {\r\n      this.shoppingLabel.style.display = "none";\r\n    }\r\n  }\r\n\r\n  reset() {\r\n    localStorage.clear("purchasedBooks");\r\n    this.purchasedBooks = [];\r\n    this.shoppingLabel.textContent = 0;\r\n    _card__WEBPACK_IMPORTED_MODULE_0__["default"].genre = "Architecture";\r\n    _card__WEBPACK_IMPORTED_MODULE_0__["default"].startIndex = 0;\r\n    _card__WEBPACK_IMPORTED_MODULE_0__["default"].cards.innerHTML = "";\r\n    _card__WEBPACK_IMPORTED_MODULE_0__["default"].sidebarButtons.forEach((button) => button.classList.remove("active"));\r\n    _card__WEBPACK_IMPORTED_MODULE_0__["default"].sidebarButtons[0].classList.add("active");\r\n    _card__WEBPACK_IMPORTED_MODULE_0__["default"].renderPage();\r\n  }\r\n}\r\n\r\nconst cart = new Cart();\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (cart);\r\n\n\n//# sourceURL=webpack://bookstore/./src/script/cart.js?')},"./src/script/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _sass_styles_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../sass/styles.scss */ "./src/sass/styles.scss");\n/* harmony import */ var _carousel_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./carousel.js */ "./src/script/carousel.js");\n/* harmony import */ var _card_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./card.js */ "./src/script/card.js");\n/* harmony import */ var _cart_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./cart.js */ "./src/script/cart.js");\n\r\n\r\n\r\n\r\n\r\n_carousel_js__WEBPACK_IMPORTED_MODULE_1__["default"].carouselEventListeners();\r\n_card_js__WEBPACK_IMPORTED_MODULE_2__["default"].cardEventListeners();\r\n_cart_js__WEBPACK_IMPORTED_MODULE_3__["default"].cartEventListeners();\r\n_carousel_js__WEBPACK_IMPORTED_MODULE_1__["default"].changeBanner();\r\n_card_js__WEBPACK_IMPORTED_MODULE_2__["default"].renderPage();\r\n\n\n//# sourceURL=webpack://bookstore/./src/script/index.js?')}},__webpack_module_cache__={};function __webpack_require__(r){var e=__webpack_module_cache__[r];if(void 0!==e)return e.exports;var t=__webpack_module_cache__[r]={exports:{}};return __webpack_modules__[r](t,t.exports,__webpack_require__),t.exports}__webpack_require__.d=(r,e)=>{for(var t in e)__webpack_require__.o(e,t)&&!__webpack_require__.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:e[t]})},__webpack_require__.o=(r,e)=>Object.prototype.hasOwnProperty.call(r,e),__webpack_require__.r=r=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./src/script/index.js")})();